import{i as R,b as N,_ as q,u as T,d as j,r as H,e as $,B as M,f as O,h as z}from"./useHandleData-66f99eae.js";import{g as G,u as J,_ as Q}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-a1f8d10e.js";import{d as B,a as F,ad as W,aE as X,r as w,o as d,f,Q as V,R as I,b as y,t as U,C as L,j as t,w as s,e as K,c as S,X as Y,U as Z,u as i,S as P,F as ee,l as _,I as ue,J as ae,aD as le,G as te,a9 as se,H as ne}from"./index-be918a25.js";import{T as re}from"./index-ee65b7c2.js";import{I as oe,u as ce}from"./index-818b2738.js";import{_ as ie}from"./_plugin-vue_export-helper-361d09b5.js";import"./notData-dc08789c.js";import"./upload-1d5979b9.js";const de={class:"select-filter"},pe={class:"select-filter-item-title"},_e={key:0,class:"select-filter-notData"},fe={class:"select-filter-list"},ve=["onClick"],ye=B({name:"selectFilter"}),ke=B({...ye,props:{data:{default:()=>[]},defaultValues:null},emits:["change"],setup(E,{emit:n}){const v=E,a=F({});W(()=>{v.data.forEach(e=>{var p;let u={...v.defaultValues};u[e.key]&&X(u[e.key])=="string"&&(u[e.key]=[...v.defaultValues[e.key]]),a.value[e.key]=u[e.key]||[(p=e.options[0])==null?void 0:p.value]})});const k=(e,u)=>{if(e.multiple)if(e.options[0].value===u.value&&(a.value[e.key]=[u.value]),a.value[e.key].includes(u.value)){let p=a.value[e.key].findIndex(b=>b===u.value);a.value[e.key].splice(p,1),a.value[e.key].length===0&&(a.value[e.key]=[e.options[0].value])}else a.value[e.key].push(u.value),a.value[e.key].includes(e.options[0].value)&&a.value[e.key].splice(0,1);else{if(a.value[e.key].includes(u.value))return;a.value[e.key]=[u.value]}g()},g=()=>{let e={...a.value};v.data.forEach(u=>!u.multiple&&(e[u.key]=e[u.key].join(""))),n("change",e)};return(e,u)=>{const p=w("el-icon"),b=w("el-scrollbar");return d(),f("div",de,[(d(!0),f(V,null,I(E.data,r=>(d(),f("div",{key:r.key,class:"select-filter-item"},[y("div",pe,[y("span",null,U(r.title)+" \uFF1A",1)]),r.options.length?L("",!0):(d(),f("span",_e,"\u6682\u65E0\u6570\u636E")),t(b,null,{default:s(()=>[y("ul",fe,[(d(!0),f(V,null,I(r.options,o=>(d(),f("li",{key:o.value,class:K({active:a.value[r.key]&&a.value[r.key].includes(o.value)}),onClick:A=>k(r,o)},[o.icon?(d(),S(p,{key:0},{default:s(()=>[(d(),S(Y(o.icon)))]),_:2},1024)):L("",!0),y("span",null,U(o.label),1)],10,ve))),128))])]),_:2},1024)]))),128))])}}});const be=ie(ke,[["__scopeId","data-v-696cb072"]]),Ce={class:"main-box"},Fe={class:"table-box"},me={class:"card select-box"},Be=B({name:"useSelectFilter"}),$e=B({...Be,setup(E){const n=F(),v=[{type:"index",label:"#",width:80},{prop:"username",label:"\u7528\u6237\u59D3\u540D",width:120},{prop:"gender",label:"\u6027\u522B",width:120,sortable:!0,enum:G},{prop:"idCard",label:"\u8EAB\u4EFD\u8BC1\u53F7"},{prop:"email",label:"\u90AE\u7BB1"},{prop:"address",label:"\u5C45\u4F4F\u5730\u5740"},{prop:"status",label:"\u7528\u6237\u72B6\u6001",width:120,sortable:!0,tag:!0,enum:J},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:180,sortable:!0},{prop:"operation",label:"\u64CD\u4F5C",width:330,fixed:"right"}],a=[{title:"\u7528\u6237\u72B6\u6001(\u5355)",key:"userStatus",options:[{label:"\u5168\u90E8",value:""},{label:"\u5728\u804C",value:"1",icon:"User"},{label:"\u5F85\u57F9\u8BAD",value:"2",icon:"Bell"},{label:"\u5F85\u4E0A\u5C97",value:"3",icon:"Clock"},{label:"\u5DF2\u79BB\u804C",value:"4",icon:"CircleClose"},{label:"\u5DF2\u9000\u4F11",value:"5",icon:"CircleCheck"}]},{title:"\u7528\u6237\u89D2\u8272(\u591A)",key:"userRole",multiple:!0,options:[{label:"\u5168\u90E8",value:""},{label:"\u8D85\u7EA7\u7BA1\u7406\u5458",value:"1"},{label:"\u516C\u53F8CEO",value:"2"},{label:"\u90E8\u95E8\u4E3B\u7BA1",value:"3"},{label:"\u4EBA\u4E8B\u7ECF\u7406",value:"4"}]}],k=F({userStatus:"2",userRole:["1","3"]}),g=l=>{P.success("\u8BF7\u6CE8\u610F\u67E5\u770B\u8BF7\u6C42\u53C2\u6570\u53D8\u5316 \u{1F914}"),n.value.pageable.pageNum=1,k.value=l},e=Z({departmentId:["11"]}),u=l=>{P.success("\u8BF7\u6CE8\u610F\u67E5\u770B\u8BF7\u6C42\u53C2\u6570\u53D8\u5316 \u{1F914}"),n.value.pageable.pageNum=1,e.departmentId=l},p=async l=>{await T(j,{id:[l.id]},`\u5220\u9664\u3010${l.username}\u3011\u7528\u6237`),n.value.getTableList()},b=async l=>{await T(H,{id:l.id},`\u91CD\u7F6E\u3010${l.username}\u3011\u7528\u6237\u5BC6\u7801`),n.value.getTableList()},r=async()=>{ce($,"\u7528\u6237\u5217\u8868",n.value.searchParam)},o=F(),A=()=>{let l={title:"\u7528\u6237",tempApi:$,importApi:M,getTableList:n.value.getTableList};o.value.acceptParams(l)},x=F(),h=(l,m={})=>{let c={title:l,rowData:{...m},isView:l==="\u67E5\u770B",api:l==="\u65B0\u589E"?O:l==="\u7F16\u8F91"?z:"",getTableList:n.value.getTableList};x.value.acceptParams(c)};return(l,m)=>{const c=w("el-button");return d(),f("div",Ce,[t(re,{title:"\u90E8\u95E8\u5217\u8868(\u591A\u9009)",multiple:"",label:"name",requestApi:i(R),defaultValue:e.departmentId,onChange:u},null,8,["requestApi","defaultValue"]),y("div",Fe,[y("div",me,[t(be,{data:a,defaultValues:k.value,onChange:g},null,8,["defaultValues"])]),t(q,{ref_key:"proTable",ref:n,title:"\u7528\u6237\u5217\u8868",columns:v,requestApi:i(N),initParam:Object.assign(e,k.value)},{tableHeader:s(()=>[t(c,{type:"primary",icon:i(ee),onClick:m[0]||(m[0]=C=>h("\u65B0\u589E"))},{default:s(()=>[_("\u65B0\u589E\u7528\u6237")]),_:1},8,["icon"]),t(c,{type:"primary",icon:i(ue),plain:"",onClick:A},{default:s(()=>[_("\u6279\u91CF\u6DFB\u52A0\u7528\u6237")]),_:1},8,["icon"]),t(c,{type:"primary",icon:i(ae),plain:"",onClick:r},{default:s(()=>[_("\u5BFC\u51FA\u7528\u6237\u6570\u636E")]),_:1},8,["icon"])]),operation:s(C=>[t(c,{type:"primary",link:"",icon:i(le),onClick:D=>h("\u67E5\u770B",C.row)},{default:s(()=>[_("\u67E5\u770B")]),_:2},1032,["icon","onClick"]),t(c,{type:"primary",link:"",icon:i(te),onClick:D=>h("\u7F16\u8F91",C.row)},{default:s(()=>[_("\u7F16\u8F91")]),_:2},1032,["icon","onClick"]),t(c,{type:"primary",link:"",icon:i(se),onClick:D=>b(C.row)},{default:s(()=>[_("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["icon","onClick"]),t(c,{type:"primary",link:"",icon:i(ne),onClick:D=>p(C.row)},{default:s(()=>[_("\u5220\u9664")]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),t(Q,{ref_key:"drawerRef",ref:x},null,512),t(oe,{ref_key:"dialogRef",ref:o},null,512)])])}}});export{$e as default};
