import{g as y,a as E,b as B,_ as k,u as c,d as p,r as v}from"./useHandleData-6069eee3.js";import{_ as D}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-14d0802c.js";import{d as m,a as A,r as T,o as $,f as x,j as r,w as s,u as n,a1 as L,k as i,a2 as S,a3 as d,a4 as N,G as U}from"./index-a53015c3.js";import"./notData-dc08789c.js";import"./_plugin-vue_export-helper-361d09b5.js";import"./upload-eb1c4dc2.js";const P={class:"table-box"},R=m({name:"complexProTable"}),W=m({...R,setup(V){const t=A(),f=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{prop:"base",label:"\u57FA\u672C\u4FE1\u606F",_children:[{prop:"username",label:"\u7528\u6237\u59D3\u540D"},{prop:"user.detail.age",label:"\u5E74\u9F84",width:100},{prop:"gender",label:"\u6027\u522B",width:100,enum:y,fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"details",label:"\u8BE6\u7EC6\u8D44\u6599",_children:[{prop:"idCard",label:"\u8EAB\u4EFD\u8BC1\u53F7"},{prop:"email",label:"\u90AE\u7BB1"},{prop:"address",label:"\u5C45\u4F4F\u5730\u5740"}]}]},{prop:"status",label:"\u7528\u6237\u72B6\u6001",tag:!0,enum:E,fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:200},{prop:"operation",label:"\u64CD\u4F5C",fixed:"right",width:230}],b=()=>{t.value.element.setCurrentRow(t.value.tableData[2])},_=e=>{const{columns:a}=e,u=[];return a.forEach((o,l)=>{if(l===0)return u[l]="\u5408\u8BA1";u[l]="N/A"}),u},C=({rowIndex:e,columnIndex:a})=>{if(a===3)return e%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},g=(e,a)=>{console.log(e),a.property!="operation"&&U.success("\u5F53\u524D\u884C\u88AB\u70B9\u51FB\u4E86\uFF01")},w=async e=>{await c(p,{id:[e.id]},`\u5220\u9664\u3010${e.username}\u3011\u7528\u6237`),t.value.getTableList()},F=async e=>{await c(p,{id:e},"\u5220\u9664\u6240\u9009\u7528\u6237\u4FE1\u606F"),t.value.clearSelection(),t.value.getTableList()},h=async e=>{await c(v,{id:e.id},`\u91CD\u7F6E\u3010${e.username}\u3011\u7528\u6237\u5BC6\u7801`),t.value.getTableList()};return(e,a)=>{const u=T("el-button");return $(),x("div",P,[r(k,{ref_key:"proTable",ref:t,title:"\u7528\u6237\u5217\u8868","highlight-current-row":"",columns:f,requestApi:n(B),"span-method":C,"show-summary":!0,"summary-method":_,onRowClick:g},{tableHeader:s(o=>[r(u,{type:"primary",icon:n(L),onClick:a[0]||(a[0]=l=>t.value.element.toggleAllSelection())},{default:s(()=>[i("\u5168\u9009 / \u5168\u4E0D\u9009")]),_:1},8,["icon"]),r(u,{type:"primary",icon:n(S),plain:"",onClick:b},{default:s(()=>[i("\u9009\u4E2D\u7B2C\u4E09\u884C")]),_:1},8,["icon"]),r(u,{type:"danger",icon:n(d),plain:"",onClick:l=>F(o.selectedListIds),disabled:!o.isSelected},{default:s(()=>[i(" \u6279\u91CF\u5220\u9664\u7528\u6237 ")]),_:2},1032,["icon","onClick","disabled"])]),operation:s(o=>[r(u,{type:"primary",link:"",icon:n(N),onClick:l=>h(o.row)},{default:s(()=>[i("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["icon","onClick"]),r(u,{type:"primary",link:"",icon:n(d),onClick:l=>w(o.row)},{default:s(()=>[i("\u5220\u9664")]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi"]),r(D,{ref:"drawerRef"},null,512)])}}});export{W as default};
