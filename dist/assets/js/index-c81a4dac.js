import{a as f,ay as D,m as R,az as V,d as T,S as E,j as a,G as p,r as c,J as I,o as z,f as G,w as t,u as i,a1 as H,k as o,aA as F,aB as K,a3 as g,t as _,aC as O,aD as j,a4 as q}from"./index-a53015c3.js";import{I as J,u as M}from"./index-32884dba.js";import{g as W,a as Q,u as m,c as X,_ as Y,b as Z,e as h,d as C,r as ee,B as ae,f as te,h as se}from"./useHandleData-6069eee3.js";import{_ as le}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-14d0802c.js";import"./_plugin-vue_export-helper-361d09b5.js";import"./notData-dc08789c.js";import"./upload-eb1c4dc2.js";const re=()=>{const d=f(""),n=D();d.value=n.name;const b=R(()=>V().authButtonListGet[d.value]||{});return{nowKey:d,BUTTONS:b}},ne={class:"table-box"},oe=T({name:"useProTable"}),ye=T({...oe,setup(d){const n=f(),b=E({type:1}),w=e=>({datalist:e.datalist,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),x=e=>{let s={...e};return s.username&&(s.username="custom-"+s.username),Z(s)},{BUTTONS:S}=re(),L=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"username",label:"\u7528\u6237\u59D3\u540D",search:{el:"input"},render:e=>a(c("el-button"),{type:"primary",link:!0,onClick:()=>p.success("\u6211\u662F\u901A\u8FC7 tsx \u8BED\u6CD5\u6E32\u67D3\u7684\u5185\u5BB9")},{default:()=>[e.row.username]})},{prop:"gender",label:"\u6027\u522B",enum:W,fieldNames:{label:"genderLabel",value:"genderValue"},search:{el:"select"}},{prop:"user.detail.age",label:"\u5E74\u9F84",search:{el:"input"}},{prop:"idCard",label:"\u8EAB\u4EFD\u8BC1\u53F7",search:{el:"input"}},{prop:"email",label:"\u90AE\u7BB1"},{prop:"address",label:"\u5C45\u4F4F\u5730\u5740"},{prop:"status",label:"\u7528\u6237\u72B6\u6001",enum:Q,fieldNames:{label:"userLabel",value:"userStatus"},search:{el:"tree-select",props:{props:{label:"userLabel"},nodeKey:"userStatus"}},render:e=>a(I,null,[S.value.status?a(c("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"\u542F\u7528":"\u7981\u7528","active-value":1,"inactive-value":0,onClick:()=>A(e.row)},null):a(c("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"\u542F\u7528":"\u7981\u7528"]})])},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",headerRender:e=>a(c("el-button"),{type:"primary",onClick:()=>{p.success("\u6211\u662F\u901A\u8FC7 tsx\u8BED\u6CD5\u6E32\u67D3\u7684\u8868\u5934")}},{default:()=>[e.label]}),width:200,search:{el:"date-picker",span:2,defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"],props:{type:"datetimerange"}}},{prop:"operation",label:"\u64CD\u4F5C",fixed:"right",width:330}],$=async()=>{M(h,"\u7528\u6237\u5217\u8868",n.value.searchParam)},U=async e=>{await m(C,{id:[e.id]},`\u5220\u9664\u3010${e.username}\u3011\u7528\u6237`),n.value.getTableList()},P=async e=>{await m(C,{id:e},"\u5220\u9664\u6240\u9009\u7528\u6237\u4FE1\u606F"),n.value.clearSelection(),n.value.getTableList()},A=async e=>{await m(X,{id:e.id,status:e.status==1?0:1},`\u5207\u6362\u3010${e.username}\u3011\u7528\u6237\u72B6\u6001`),n.value.getTableList()},B=async e=>{await m(ee,{id:e.id},`\u91CD\u7F6E\u3010${e.username}\u3011\u7528\u6237\u5BC6\u7801`),n.value.getTableList()},k=f(),N=()=>{let e={title:"\u7528\u6237",tempApi:h,importApi:ae,getTableList:n.value.getTableList};k.value.acceptParams(e)},v=f(),y=(e,s={})=>{let r={title:e,rowData:{...s},isView:e==="\u67E5\u770B",api:e==="\u65B0\u589E"?te:e==="\u7F16\u8F91"?se:"",getTableList:n.value.getTableList};v.value.acceptParams(r)};return(e,s)=>{const r=c("el-button");return z(),G("div",ne,[a(Y,{ref_key:"proTable",ref:n,title:"\u7528\u6237\u5217\u8868",columns:L,requestApi:x,initParam:b,dataCallback:w},{tableHeader:t(l=>[a(r,{type:"primary",icon:i(H),onClick:s[0]||(s[0]=u=>y("\u65B0\u589E"))},{default:t(()=>[o("\u65B0\u589E\u7528\u6237")]),_:1},8,["icon"]),a(r,{type:"primary",icon:i(F),onClick:N},{default:t(()=>[o("\u6279\u91CF\u6DFB\u52A0\u7528\u6237")]),_:1},8,["icon"]),a(r,{type:"primary",icon:i(K),onClick:$},{default:t(()=>[o("\u5BFC\u51FA\u7528\u6237\u6570\u636E")]),_:1},8,["icon"]),a(r,{type:"primary",icon:i(g),onClick:u=>P(l.selectedListIds),disabled:!l.isSelected},{default:t(()=>[o("\u6279\u91CF\u5220\u9664\u7528\u6237")]),_:2},1032,["icon","onClick","disabled"])]),expand:t(l=>[o(_(l.row),1)]),usernameHeader:t(l=>[a(r,{type:"primary",onClick:s[1]||(s[1]=u=>i(p).success("\u6211\u662F\u901A\u8FC7\u4F5C\u7528\u57DF\u63D2\u69FD\u6E32\u67D3\u7684\u8868\u5934"))},{default:t(()=>[o(_(l.row.label),1)]),_:2},1024)]),createTime:t(l=>[a(r,{type:"primary",link:"",onClick:s[2]||(s[2]=u=>i(p).success("\u6211\u662F\u901A\u8FC7\u4F5C\u7528\u57DF\u63D2\u69FD\u6E32\u67D3\u7684\u5185\u5BB9"))},{default:t(()=>[o(_(l.row.createTime),1)]),_:2},1024)]),operation:t(l=>[a(r,{type:"primary",link:"",icon:i(O),onClick:u=>y("\u67E5\u770B",l.row)},{default:t(()=>[o("\u67E5\u770B")]),_:2},1032,["icon","onClick"]),a(r,{type:"primary",link:"",icon:i(j),onClick:u=>y("\u7F16\u8F91",l.row)},{default:t(()=>[o("\u7F16\u8F91")]),_:2},1032,["icon","onClick"]),a(r,{type:"primary",link:"",icon:i(q),onClick:u=>B(l.row)},{default:t(()=>[o("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["icon","onClick"]),a(r,{type:"primary",link:"",icon:i(g),onClick:u=>U(l.row)},{default:t(()=>[o("\u5220\u9664")]),_:2},1032,["icon","onClick"])]),_:1},8,["initParam"]),a(le,{ref_key:"drawerRef",ref:v},null,512),a(J,{ref_key:"dialogRef",ref:k},null,512)])}}});export{ye as default};
