import{d as v,a as f,U as N,j as a,r as c,Q as B,o as R,f as I,w as t,S as d,u as i,F as V,l as n,I as E,J as H,H as w,t as b,aD as F,G as z,a9 as G}from"./index-be918a25.js";import{u as j}from"./useAuthButtons-429c2afe.js";import{I as q,u as J}from"./index-818b2738.js";import{g as K,a as M,u as p,c as O,_ as Q,b as W,e as g,d as k,r as X,B as Y,f as Z,h as ee}from"./useHandleData-66f99eae.js";import{_ as ae}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-a1f8d10e.js";import"./_plugin-vue_export-helper-361d09b5.js";import"./notData-dc08789c.js";import"./upload-1d5979b9.js";const te={class:"table-box"},se=v({name:"useProTable"}),fe=v({...se,setup(le){const o=f(),C=N({type:1}),h=e=>({datalist:e.datalist?e.datalist:e.list,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),T=e=>{let s={...e};return s.username&&(s.username="custom-"+s.username),W(s)},{BUTTONS:x}=j(),L=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"username",label:"\u7528\u6237\u59D3\u540D",search:{el:"input"},render:e=>a(c("el-button"),{type:"primary",link:!0,onClick:()=>d.success("\u6211\u662F\u901A\u8FC7 tsx \u8BED\u6CD5\u6E32\u67D3\u7684\u5185\u5BB9")},{default:()=>[e.row.username]})},{prop:"gender",label:"\u6027\u522B",enum:K,fieldNames:{label:"genderLabel",value:"genderValue"},search:{el:"select"}},{prop:"user.detail.age",label:"\u5E74\u9F84",search:{el:"input"}},{prop:"idCard",label:"\u8EAB\u4EFD\u8BC1\u53F7",search:{el:"input"}},{prop:"email",label:"\u90AE\u7BB1"},{prop:"address",label:"\u5C45\u4F4F\u5730\u5740"},{prop:"status",label:"\u7528\u6237\u72B6\u6001",enum:M,fieldNames:{label:"userLabel",value:"userStatus"},search:{el:"tree-select",props:{props:{label:"userLabel"},nodeKey:"userStatus"}},render:e=>a(B,null,[x.value.status?a(c("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"\u542F\u7528":"\u7981\u7528","active-value":1,"inactive-value":0,onClick:()=>P(e.row)},null):a(c("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"\u542F\u7528":"\u7981\u7528"]})])},{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",headerRender:e=>a(c("el-button"),{type:"primary",onClick:()=>{d.success("\u6211\u662F\u901A\u8FC7 tsx\u8BED\u6CD5\u6E32\u67D3\u7684\u8868\u5934")}},{default:()=>[e.label]}),width:200,search:{el:"date-picker",span:2,defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"],props:{type:"datetimerange"}}},{prop:"operation",label:"\u64CD\u4F5C",fixed:"right",width:330}],$=async()=>{J(g,"\u7528\u6237\u5217\u8868",o.value.searchParam)},S=async e=>{await p(k,{id:[e.id]},`\u5220\u9664\u3010${e.username}\u3011\u7528\u6237`),o.value.getTableList()},U=async e=>{await p(k,{id:e},"\u5220\u9664\u6240\u9009\u7528\u6237\u4FE1\u606F"),o.value.clearSelection(),o.value.getTableList()},P=async e=>{await p(O,{id:e.id,status:e.status==1?0:1},`\u5207\u6362\u3010${e.username}\u3011\u7528\u6237\u72B6\u6001`),o.value.getTableList()},A=async e=>{await p(X,{id:e.id},`\u91CD\u7F6E\u3010${e.username}\u3011\u7528\u6237\u5BC6\u7801`),o.value.getTableList()},y=f(),D=()=>{let e={title:"\u7528\u6237",tempApi:g,importApi:Y,getTableList:o.value.getTableList};y.value.acceptParams(e)},_=f(),m=(e,s={})=>{let r={title:e,rowData:{...s},isView:e==="\u67E5\u770B",api:e==="\u65B0\u589E"?Z:e==="\u7F16\u8F91"?ee:"",getTableList:o.value.getTableList};_.value.acceptParams(r)};return(e,s)=>{const r=c("el-button");return R(),I("div",te,[a(Q,{ref_key:"proTable",ref:o,title:"\u7528\u6237\u5217\u8868",columns:L,requestApi:T,initParam:C,dataCallback:h},{tableHeader:t(l=>[a(r,{type:"primary",icon:i(V),onClick:s[0]||(s[0]=u=>m("\u65B0\u589E"))},{default:t(()=>[n("\u65B0\u589E\u7528\u6237")]),_:1},8,["icon"]),a(r,{type:"primary",icon:i(E),onClick:D},{default:t(()=>[n("\u6279\u91CF\u6DFB\u52A0\u7528\u6237")]),_:1},8,["icon"]),a(r,{type:"primary",icon:i(H),onClick:$},{default:t(()=>[n("\u5BFC\u51FA\u7528\u6237\u6570\u636E")]),_:1},8,["icon"]),a(r,{type:"primary",icon:i(w),onClick:u=>U(l.selectedListIds),disabled:!l.isSelected},{default:t(()=>[n("\u6279\u91CF\u5220\u9664\u7528\u6237")]),_:2},1032,["icon","onClick","disabled"])]),expand:t(l=>[n(b(l.row),1)]),usernameHeader:t(l=>[a(r,{type:"primary",onClick:s[1]||(s[1]=u=>i(d).success("\u6211\u662F\u901A\u8FC7\u4F5C\u7528\u57DF\u63D2\u69FD\u6E32\u67D3\u7684\u8868\u5934"))},{default:t(()=>[n(b(l.row.label),1)]),_:2},1024)]),createTime:t(l=>[a(r,{type:"primary",link:"",onClick:s[2]||(s[2]=u=>i(d).success("\u6211\u662F\u901A\u8FC7\u4F5C\u7528\u57DF\u63D2\u69FD\u6E32\u67D3\u7684\u5185\u5BB9"))},{default:t(()=>[n(b(l.row.createTime),1)]),_:2},1024)]),operation:t(l=>[a(r,{type:"primary",link:"",icon:i(F),onClick:u=>m("\u67E5\u770B",l.row)},{default:t(()=>[n("\u67E5\u770B")]),_:2},1032,["icon","onClick"]),a(r,{type:"primary",link:"",icon:i(z),onClick:u=>m("\u7F16\u8F91",l.row)},{default:t(()=>[n("\u7F16\u8F91")]),_:2},1032,["icon","onClick"]),a(r,{type:"primary",link:"",icon:i(G),onClick:u=>A(l.row)},{default:t(()=>[n("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["icon","onClick"]),a(r,{type:"primary",link:"",icon:i(w),onClick:u=>S(l.row)},{default:t(()=>[n("\u5220\u9664")]),_:2},1032,["icon","onClick"])]),_:1},8,["initParam"]),a(ae,{ref_key:"drawerRef",ref:_},null,512),a(q,{ref_key:"dialogRef",ref:y},null,512)])}}});export{fe as default};
